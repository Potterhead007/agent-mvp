import{c as de,r as l,j as e,C as w,e as C,a0 as H,B as u,$ as ve,l as D,L as U,i as M,a3 as q,a4 as Ee,a5 as Te,a7 as De,a8 as Le,a9 as Ie,u as Ne,g as ne,R as le,P as ee,a as ye,b as be,a1 as $e,D as qe}from"./index-DLzrVyEL.js";import{T as ke,a as Se,b as se,c as ae}from"./tabs-DFtfPH-O.js";import{H as _e}from"./HelpTip-Bf0ngYP4.js";import{S as P}from"./skeleton-C3jo3W2d.js";import{L as T}from"./label-N6WvVUTh.js";import{T as O}from"./textarea-Cg5T9mcn.js";import{F as ze}from"./file-text-2xaGoTCx.js";import{W as Re}from"./wrench-BgLkyC0m.js";import{E as Fe}from"./eye-D6E-mqI1.js";import{C as we}from"./check-BnfHjeKt.js";import{T as oe}from"./trash-2-hOfGscB6.js";import{S as Ae}from"./save-B-mWaBjp.js";import{E as Pe}from"./ExternalLink-CajcdnyV.js";import{u as He}from"./usePageTitle-BWQ1x_eW.js";import{S as Me}from"./search-DRTgMfl0.js";import{C as re}from"./circle-alert-ChFoNBvB.js";import{P as Be}from"./pencil-CJ-valFp.js";import"./index-BmrRr2YK.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=de("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),ie=[{label:"Metadata",icon:ze},{label:"Tools",icon:Re},{label:"Handler",icon:Oe},{label:"Review",icon:Fe}];function Ue(d){return d.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}function Ce(d){return d.replace(/-/g,"_").replace(/[^a-z0-9_]/gi,"")}function We({onCreated:d}){const[m,N]=l.useState(0),[_,y]=l.useState(!1),[z,L]=l.useState(null),[p,b]=l.useState(""),[I,R]=l.useState(""),[k,S]=l.useState("1.0.0"),[h,E]=l.useState([]),[c,j]=l.useState(null),[$,t]=l.useState(null),[i,g]=l.useState(""),[B,f]=l.useState(""),v=Ue(p),W=p.trim().length>0||h.length>0||i.length>0;l.useEffect(()=>{if(!W)return;const a=n=>{n.preventDefault()};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[W]);const G=()=>m===0?p.trim().length>0&&v.length>0:!0,Y=()=>{if(h.length===0)return`# Skill handler for ${p}

async def handle(input: dict, context: dict) -> dict:
    # input["param_name"] — access parameters
    # context["workspace"] — agent workspace path
    return {"result": "value"}
`;let a=`# Skill handler for ${p}

`;for(const n of h){const r=n.parameters.map(x=>`    # input["${x.name}"] — ${x.description} (${x.type})`).join(`
`);a+=`async def ${n.handler}(input: dict, context: dict) -> dict:
`,r&&(a+=`${r}
`),a+=`    # context["workspace"] — agent workspace path
`,a+=`    return {"result": "value"}

`}return a},J=()=>{m===1&&!i&&g(Y()),N(a=>Math.min(a+1,ie.length-1))},Q=async()=>{y(!0),L(null);try{const a=h.map(n=>({name:n.name,description:n.description,handler:n.handler,parameters:n.parameters.map(r=>({name:r.name,type:r.type,description:r.description,required:r.required}))}));await M("create_skill",{id:v,name:p,description:I,version:k||void 0,tools:a.length>0?a:void 0,handlerCode:i||void 0,requirements:B||void 0}),q(`Created skill "${p}"`,"success"),d(),N(0),b(""),R(""),S("1.0.0"),E([]),g(""),f("")}catch(a){const n=a instanceof Error?a.message:String(a);L(n),q(`Failed to create skill: ${n}`,"error")}finally{y(!1)}},te=()=>{j({name:"",description:"",handler:"",parameters:[]}),t(null)},s=a=>{j({...h[a]}),t(a)},o=()=>{if(!c||!c.name.trim())return;const a={...c,handler:c.handler||Ce(c.name)};E($!==null?n=>n.map((r,x)=>x===$?a:r):n=>[...n,a]),j(null),t(null)},F=a=>{E(n=>n.filter((r,x)=>x!==a))},X=()=>{c&&j({...c,parameters:[...c.parameters,{name:"",type:"string",description:"",required:!1}]})},A=(a,n,r)=>{if(!c)return;const x=[...c.parameters];x[a]={...x[a],[n]:r},j({...c,parameters:x})},Z=a=>{c&&j({...c,parameters:c.parameters.filter((n,r)=>r!==a)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:ie.map((a,n)=>{const r=a.icon,x=n===m,K=n<m;return e.jsxs("div",{className:"flex items-center gap-2",children:[n>0&&e.jsx("div",{className:"h-px w-6 bg-border"}),e.jsxs("button",{onClick:()=>n<m&&N(n),disabled:n>m,className:`flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-medium transition-colors ${x?"bg-primary text-primary-foreground":K?"bg-primary/20 text-primary cursor-pointer hover:bg-primary/30":"bg-muted text-muted-foreground"}`,children:[K?e.jsx(we,{className:"h-3 w-3"}):e.jsx(r,{className:"h-3 w-3"}),a.label]})]},a.label)})}),m===0&&e.jsx(w,{children:e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"skill-name",children:"Skill Name"}),e.jsx(H,{id:"skill-name",value:p,onChange:a=>b(a.target.value),placeholder:"My Custom Skill"}),p&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",e.jsx("code",{className:"bg-muted px-1 rounded",children:v||"(invalid)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"skill-desc",children:"Description"}),e.jsx(O,{id:"skill-desc",value:I,onChange:a=>R(a.target.value),placeholder:"What does this skill do?",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"skill-version",children:"Version"}),e.jsx(H,{id:"skill-version",value:k,onChange:a=>S(a.target.value),placeholder:"1.0.0"})]})]})}),m===1&&e.jsx(w,{children:e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define the tools this skill provides to agents. Tools are optional."}),e.jsxs(u,{size:"sm",variant:"outline",onClick:te,children:[e.jsx(ve,{className:"mr-1 h-3 w-3"})," Add Tool"]})]}),h.map((a,n)=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border px-3 py-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.description}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Handler: ",e.jsx("code",{children:a.handler})," | ",a.parameters.length," param(s)"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>s(n),children:"Edit"}),e.jsx(u,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>F(n),children:e.jsx(oe,{className:"h-3 w-3"})})]})]},n)),h.length===0&&!c&&e.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:'No tools defined yet. Click "Add Tool" to define one, or skip this step.'}),c&&e.jsxs("div",{className:"rounded-md border p-4 space-y-3 bg-muted/30",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(T,{className:"text-xs",children:"Tool Name (snake_case)"}),e.jsx(H,{value:c.name,onChange:a=>j({...c,name:a.target.value}),placeholder:"web_search"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(T,{className:"text-xs",children:"Handler Function"}),e.jsx(H,{value:c.handler,onChange:a=>j({...c,handler:a.target.value}),placeholder:Ce(c.name)||"auto-derived"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(T,{className:"text-xs",children:"Description (for the AI)"}),e.jsx(O,{value:c.description,onChange:a=>j({...c,description:a.target.value}),placeholder:"Search the web for information",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{className:"text-xs",children:"Parameters"}),e.jsxs(u,{size:"sm",variant:"ghost",onClick:X,children:[e.jsx(ve,{className:"mr-1 h-3 w-3"})," Add Param"]})]}),c.parameters.map((a,n)=>e.jsxs("div",{className:"grid grid-cols-[1fr_100px_1fr_auto_auto] gap-2 items-center",children:[e.jsx(H,{value:a.name,onChange:r=>A(n,"name",r.target.value),placeholder:"param_name",className:"text-xs h-8"}),e.jsxs("select",{value:a.type,onChange:r=>A(n,"type",r.target.value),className:"h-8 rounded-md border bg-background px-2 text-xs",children:[e.jsx("option",{value:"string",children:"string"}),e.jsx("option",{value:"number",children:"number"}),e.jsx("option",{value:"boolean",children:"boolean"}),e.jsx("option",{value:"array",children:"array"})]}),e.jsx(H,{value:a.description,onChange:r=>A(n,"description",r.target.value),placeholder:"Description",className:"text-xs h-8"}),e.jsxs("label",{className:"flex items-center gap-1 text-xs whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:a.required,onChange:r=>A(n,"required",r.target.checked)}),"Req"]}),e.jsx(u,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-destructive",onClick:()=>Z(n),children:e.jsx(oe,{className:"h-3 w-3"})})]},n))]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>{j(null),t(null)},children:"Cancel"}),e.jsx(u,{size:"sm",onClick:o,disabled:!c.name.trim(),children:$!==null?"Update":"Add"})]})]})]})}),m===2&&e.jsx(w,{children:e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"Handler Code (Python)"}),e.jsx(O,{value:i,onChange:a=>g(a.target.value),className:"font-mono text-xs min-h-[240px]",placeholder:"async def handle(input: dict, context: dict) -> dict: ..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"Requirements (pip packages, one per line)"}),e.jsx(O,{value:B,onChange:a=>f(a.target.value),className:"font-mono text-xs min-h-[80px]",placeholder:`requests>=2.28
beautifulsoup4`,rows:4})]})]})}),m===3&&e.jsx(w,{children:e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Review Skill"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Name"}),e.jsx("span",{className:"font-medium",children:p}),e.jsx("span",{className:"text-muted-foreground",children:"ID"}),e.jsx("code",{className:"bg-muted px-1 rounded text-xs",children:v}),e.jsx("span",{className:"text-muted-foreground",children:"Version"}),e.jsx("span",{children:k}),e.jsx("span",{className:"text-muted-foreground",children:"Description"}),e.jsx("span",{children:I||"(none)"}),e.jsx("span",{className:"text-muted-foreground",children:"Tools"}),e.jsx("span",{children:h.length>0?h.map(a=>a.name).join(", "):"(none)"})]}),h.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Tool Definitions"}),h.map((a,n)=>e.jsxs("div",{className:"rounded border px-3 py-2 text-xs space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{variant:"outline",children:a.name}),e.jsx("span",{className:"text-muted-foreground",children:a.description})]}),a.parameters.length>0&&e.jsx("div",{className:"ml-4 space-y-0.5",children:a.parameters.map((r,x)=>e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("code",{children:r.name})," ",e.jsxs("span",{className:"text-xs",children:["(",r.type,")"]}),r.required&&e.jsx(D,{variant:"secondary",className:"ml-1 text-[9px] px-1",children:"required"}),r.description&&e.jsxs("span",{children:[" — ",r.description]})]},x))})]},n))]}),i&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Handler Preview"}),e.jsx("pre",{className:"bg-muted rounded-md p-3 text-xs font-mono overflow-x-auto max-h-48 overflow-y-auto",children:i})]}),z&&e.jsx("p",{className:"text-sm text-destructive",children:z})]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(u,{variant:"outline",onClick:()=>N(a=>Math.max(a-1,0)),disabled:m===0,children:[e.jsx(Ke,{className:"mr-1 h-4 w-4"})," Back"]}),m<ie.length-1?e.jsxs(u,{onClick:J,disabled:!G(),children:["Next ",e.jsx(Ve,{className:"ml-1 h-4 w-4"})]}):e.jsxs(u,{onClick:Q,disabled:_||!G(),children:[_?e.jsx(U,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(we,{className:"mr-2 h-4 w-4"}),"Create Skill"]})]})]})}const ce=[{key:"meta",label:"skill.json",path:"skill.json"},{key:"handler",label:"handler.py",path:"src/handler.py"},{key:"requirements",label:"requirements.txt",path:"requirements.txt"}];function Ge({skill:d,open:m,onOpenChange:N}){const[_,y]=l.useState("meta"),[z,L]=l.useState({}),[p,b]=l.useState({}),[I,R]=l.useState({}),[k,S]=l.useState({}),h=l.useCallback(async t=>{if(d){b(i=>({...i,[t.key]:!0}));try{const i=await M("read_skill_file",{skillId:d.id,relativePath:t.path});L(g=>({...g,[t.key]:i})),S(g=>({...g,[t.key]:!1}))}catch{L(i=>({...i,[t.key]:""}))}finally{b(i=>({...i,[t.key]:!1}))}}},[d]);l.useEffect(()=>{if(m&&d)for(const t of ce)h(t)},[m,d,h]);const E=async t=>{if(d){R(i=>({...i,[t.key]:!0}));try{await M("update_skill_file",{skillId:d.id,relativePath:t.path,content:z[t.key]??""}),S(i=>({...i,[t.key]:!1})),q(`Saved ${t.label}`,"success")}catch(i){q(`Failed to save ${t.label}: ${i instanceof Error?i.message:String(i)}`,"error")}finally{R(i=>({...i,[t.key]:!1}))}}},c=(t,i)=>{L(g=>({...g,[t]:i})),S(g=>({...g,[t]:!0}))},j=Object.values(k).some(Boolean),$=t=>{!t&&j&&!window.confirm("You have unsaved changes. Close without saving?")||N(t)};return d?e.jsx(Ee,{open:m,onOpenChange:$,children:e.jsxs(Te,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs(De,{children:[e.jsxs(Le,{children:["Edit Skill: ",d.name]}),e.jsx(Ie,{children:"Edit the files within this skill. Changes are saved per file."})]}),e.jsxs(ke,{value:_,onValueChange:y,className:"flex-1 flex flex-col min-h-0",children:[e.jsx(Se,{children:ce.map(t=>e.jsxs(se,{value:t.key,children:[t.label,k[t.key]&&e.jsx("span",{className:"ml-1 text-amber-500",children:"*"})]},t.key))}),ce.map(t=>e.jsx(ae,{value:t.key,className:"flex-1 flex flex-col min-h-0 space-y-2",children:p[t.key]?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(U,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsxs(e.Fragment,{children:[e.jsx(O,{value:z[t.key]??"",onChange:i=>c(t.key,i.target.value),className:"font-mono text-xs flex-1 min-h-[280px] resize-y"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(u,{size:"sm",onClick:()=>E(t),disabled:I[t.key]||!k[t.key],children:[I[t.key]?e.jsx(U,{className:"mr-2 h-3 w-3 animate-spin"}):e.jsx(Ae,{className:"mr-2 h-3 w-3"}),"Save"]})})]})},t.key))]})]})}):null}function hs(){He("Skills");const d=Ne(s=>s.gatewayConnected),m=Ne(s=>s.setMilestone);l.useEffect(()=>{m("skillsExplored")},[m]);const[N,_]=l.useState([]),[y,z]=l.useState(""),[L,p]=l.useState(!0),[b,I]=l.useState([]),[R,k]=l.useState(!1),[S,h]=l.useState(null),[E,c]=l.useState(null),[j,$]=l.useState(null),[t,i]=l.useState(null),[g,B]=l.useState("installed"),f=l.useCallback(async()=>{p(!0);try{const s=await M("list_skills");_(s),$(null)}catch(s){_([]),$(s instanceof Error?s.message:String(s))}finally{p(!1)}},[]),v=l.useCallback(async(s=!1)=>{if(d){s&&(k(!0),h(null));try{const o=await ne.requestAsync("skills.status",{});I((o==null?void 0:o.skills)??[])}catch(o){s&&h(String(o instanceof Error?o.message:o))}finally{s&&k(!1)}}},[d]);l.useEffect(()=>{f()},[f]),l.useEffect(()=>{d&&v()},[d,v]);const W=async s=>{if(d)try{await ne.requestAsync("skills.update",{skillKey:s.id,enabled:!s.enabled}),await f(),await v();return}catch{}try{await M("toggle_skill",{skillId:s.id,enabled:!s.enabled}),await f()}catch(o){q(`Failed to toggle skill: ${o instanceof Error?o.message:String(o)}`,"error"),await f()}},G=async s=>{c(s.skillKey);try{await ne.requestAsync("skills.install",{name:s.name,installId:s.skillKey}),q(`Installed "${s.name}"`,"success"),await f(),await v()}catch(o){q(`Failed to install: ${o instanceof Error?o.message:String(o)}`,"error")}finally{c(null)}},Y=l.useMemo(()=>N.map(s=>{const o=b.find(F=>F.skillKey===s.id||F.name===s.name);return{...s,gatewayEnabled:(o==null?void 0:o.disabled)===!1}}),[N,b]),J=l.useMemo(()=>Y.filter(s=>s.name.toLowerCase().includes(y.toLowerCase())||s.description.toLowerCase().includes(y.toLowerCase())),[Y,y]),Q=l.useMemo(()=>b.filter(s=>s.name.toLowerCase().includes(y.toLowerCase())||(s.description??"").toLowerCase().includes(y.toLowerCase())),[b,y]),te=s=>N.some(o=>o.id===s);return L?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{className:"h-8 w-32"}),e.jsx(P,{className:"h-4 w-48"})]})}),e.jsx(P,{className:"h-10 w-full"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(s=>e.jsx(w,{children:e.jsxs(C,{className:"p-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx(P,{className:"h-4 w-24"})]}),e.jsx(P,{className:"h-3 w-full"}),e.jsx(P,{className:"h-6 w-16 rounded-full"})]})},s))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:["Skills",e.jsx(_e,{text:"Skills are add-on abilities for your agent — like web search, code execution, or custom integrations. Install them from ClawHub or manage the ones you already have."})]}),e.jsx("p",{className:"text-muted-foreground",children:"Browse and manage agent skills"})]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{f(),v(!0)},"aria-label":"Refresh skills",children:[e.jsx(le,{className:"mr-2 h-4 w-4"})," Refresh"]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Me,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(H,{value:y,onChange:s=>z(s.target.value),placeholder:"Search skills...",className:"pl-9","aria-label":"Search skills"})]})}),j&&e.jsxs("div",{className:"flex items-center gap-2 rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:[e.jsx(re,{className:"h-4 w-4 shrink-0"}),e.jsxs("span",{className:"flex-1",children:["Failed to load skills: ",j]}),e.jsxs(u,{variant:"ghost",size:"sm",onClick:f,children:[e.jsx(le,{className:"mr-2 h-3 w-3"})," Retry"]})]}),e.jsxs(ke,{value:g,onValueChange:B,children:[e.jsxs(Se,{children:[e.jsxs(se,{value:"installed",children:["Installed (",N.filter(s=>s.installed).length,")"]}),e.jsx(se,{value:"browse",onClick:()=>v(!0),children:"Browse ClawHub"}),e.jsx(se,{value:"create",children:"Create Custom"})]}),e.jsx(ae,{value:"installed",children:J.filter(s=>s.installed).length===0&&N.filter(s=>s.installed).length>0?e.jsx(w,{children:e.jsxs(C,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ee,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No skills match your search"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try a different search term"})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:J.filter(s=>s.installed).map(s=>e.jsxs(w,{children:[e.jsx(ye,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-primary"}),e.jsx(be,{className:"text-base",children:s.name})]}),e.jsxs(D,{variant:"outline",children:["v",s.version]})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{variant:s.enabled?"success":"secondary",className:"cursor-pointer",onClick:()=>W(s),role:"button","aria-label":`${s.enabled?"Disable":"Enable"} ${s.name}`,children:s.enabled?"Enabled":"Disabled"}),e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>i(s),"aria-label":`Edit ${s.name}`,children:[e.jsx(Be,{className:"mr-1 h-3 w-3"})," Edit"]}),e.jsxs(u,{variant:"ghost",size:"sm",className:"ml-auto text-destructive","aria-label":`Remove ${s.name}`,onClick:async()=>{try{await M("remove_skill",{skillId:s.id}),await f(),await v(),$e(`Removed "${s.name}"`,async()=>{await f()})}catch(o){q(`Failed to remove skill: ${o instanceof Error?o.message:String(o)}`,"error")}},children:[e.jsx(oe,{className:"mr-1 h-3 w-3"})," Remove"]})]})]})]},s.id))})}),e.jsx(ae,{value:"browse",children:d?R?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(U,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):S?e.jsx(w,{children:e.jsxs(C,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(re,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("p",{className:"text-destructive font-medium",children:"Failed to load skills"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:S}),e.jsxs(u,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>v(!0),children:[e.jsx(le,{className:"mr-2 h-4 w-4"})," Retry"]})]})}):Q.length===0?e.jsx(w,{children:e.jsxs(C,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ee,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:b.length===0?"No skills available yet":"No skills match your search"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:b.length===0?"Skills will appear here when they are published to ClawHub":"Try a different search term"})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Q.map(s=>{var X,A,Z,a,n,r,x,K,me,xe,he,ue,pe,je,fe,ge;const o=te(s.skillKey),F=(((A=(X=s.missing)==null?void 0:X.bins)==null?void 0:A.length)??0)>0||(((a=(Z=s.missing)==null?void 0:Z.env)==null?void 0:a.length)??0)>0||(((r=(n=s.missing)==null?void 0:n.config)==null?void 0:r.length)??0)>0||(((K=(x=s.missing)==null?void 0:x.os)==null?void 0:K.length)??0)>0;return e.jsxs(w,{children:[e.jsx(ye,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.emoji?e.jsx("span",{className:"text-base",children:s.emoji}):e.jsx(ee,{className:"h-4 w-4 text-primary"}),e.jsx(be,{className:"text-base",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.eligible&&!s.disabled&&e.jsx(D,{variant:"success",className:"text-[10px]",children:"Ready"}),s.disabled&&e.jsx(D,{variant:"secondary",className:"text-[10px]",children:"Disabled"}),F&&!s.eligible&&!s.disabled&&e.jsx(D,{variant:"outline",className:"text-[10px] border-amber-500/30 text-amber-500",children:"Needs Setup"})]})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description??"No description"}),F&&e.jsxs("div",{className:"rounded-md border border-amber-500/20 bg-amber-500/5 px-2.5 py-2 mb-3 space-y-1",children:[(((xe=(me=s.missing)==null?void 0:me.bins)==null?void 0:xe.length)??0)>0&&e.jsxs("p",{className:"text-xs text-amber-500",children:[e.jsx("span",{className:"font-medium",children:"Missing tools:"})," ",s.missing.bins.map(V=>e.jsx("code",{className:"mx-0.5 rounded bg-amber-500/10 px-1 py-0.5 font-mono text-[10px]",children:V},V))]}),(((ue=(he=s.missing)==null?void 0:he.env)==null?void 0:ue.length)??0)>0&&e.jsxs("p",{className:"text-xs text-amber-500",children:[e.jsx("span",{className:"font-medium",children:"Missing env vars:"})," ",s.missing.env.map(V=>e.jsx("code",{className:"mx-0.5 rounded bg-amber-500/10 px-1 py-0.5 font-mono text-[10px]",children:V},V))]}),(((je=(pe=s.missing)==null?void 0:pe.config)==null?void 0:je.length)??0)>0&&e.jsxs("p",{className:"text-xs text-amber-500",children:[e.jsx("span",{className:"font-medium",children:"Missing config:"})," ",s.missing.config.join(", ")]}),(((ge=(fe=s.missing)==null?void 0:fe.os)==null?void 0:ge.length)??0)>0&&e.jsxs("p",{className:"text-xs text-amber-500",children:[e.jsx("span",{className:"font-medium",children:"Requires OS:"})," ",s.missing.os.join(", ")]}),e.jsxs("p",{className:"text-[10px] text-amber-500/70",children:["Install the missing dependencies above to enable this skill.",s.homepage&&" See docs for setup instructions."]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o?e.jsx(D,{variant:"success",children:"Installed"}):s.install&&s.install.length>0?e.jsxs(u,{size:"sm",onClick:()=>G(s),disabled:E===s.skillKey,children:[E===s.skillKey?e.jsx(U,{className:"mr-2 h-3 w-3 animate-spin"}):e.jsx(qe,{className:"mr-2 h-3 w-3"}),s.install[0].label]}):e.jsx(D,{variant:s.eligible?"success":"outline",children:s.eligible?"Available":"Unavailable"}),s.homepage&&e.jsx(Pe,{href:s.homepage,className:"text-xs text-muted-foreground hover:text-foreground underline",children:"Docs"})]})]})]},s.skillKey)})}):e.jsx(w,{children:e.jsxs(C,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(re,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Agents must be running"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Start your agents from the Dashboard to browse and install skills from ClawHub"})]})})}),e.jsx(ae,{value:"create",children:e.jsx(We,{onCreated:()=>{f(),B("installed")}})})]}),e.jsx(Ge,{skill:t,open:t!==null,onOpenChange:s=>{s||i(null)}})]})}export{hs as default};
