const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C5fSXSG5.js","assets/index-DLzrVyEL.js","assets/index-Di2Zhpwl.css"])))=>i.map(i=>d[i]);
import{c as oe,r as l,u as ce,j as e,C as T,a as F,b as z,d as K,B as m,e as _,a3 as N,_ as de,E as W,l as U,h as X,W as me,a4 as C,a5 as S,a7 as D,a8 as O,a9 as M,aa as R,i as A,R as ue,$ as V,a0 as he}from"./index-DLzrVyEL.js";import{L as P}from"./label-N6WvVUTh.js";import{T as Z}from"./textarea-Cg5T9mcn.js";import{S as $,a as q,b as Y,c as B,d as H}from"./select-Bf3NEO-Y.js";import{u as xe}from"./useAgent-CUNFZjw0.js";import{T as pe,a as ge,b as I,c as G}from"./tabs-DFtfPH-O.js";import{r as ee,w as se}from"./filesystem-qjLUdkNf.js";import{R as te}from"./rotate-ccw-zsPzpsnb.js";import{S as ae}from"./save-B-mWaBjp.js";import{S as ne}from"./switch-CtqUxp-4.js";import{g as fe,M as L,a as je,f as ve}from"./models-BN2rvPIS.js";import{T as we}from"./trash-2-hOfGscB6.js";import{H as ye}from"./HelpTip-Bf0ngYP4.js";import{S as E}from"./skeleton-C3jo3W2d.js";import{u as be}from"./usePageTitle-BWQ1x_eW.js";import"./index-BmrRr2YK.js";import"./index-C-bnBz93.js";import"./check-BnfHjeKt.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Ce=l.lazy(()=>de(()=>import("./index-C5fSXSG5.js"),__vite__mapDeps([0,1,2]))),J={none:{label:"Start from scratch",content:""},assistant:{label:"Professional Assistant",content:`# Professional Assistant

You are a helpful, professional assistant. You communicate clearly and concisely.

## Tone
- Friendly but professional
- Direct and actionable
- Patient with follow-up questions

## Rules
- Always provide sources when making factual claims
- If you're unsure about something, say so
- Break complex topics into simple steps
- Use bullet points for lists and structured information`},creative:{label:"Creative Writer",content:`# Creative Writer

You are a creative writing assistant with a flair for storytelling, poetry, and imaginative content.

## Tone
- Expressive and vivid
- Playful with language
- Encouraging and supportive of creative ideas

## Strengths
- Short stories, poems, and creative fiction
- Brainstorming unique ideas and plot twists
- Editing and refining creative work
- Adapting tone and style to match the request

## Rules
- Prioritize originality over convention
- Offer multiple creative directions when asked
- Be constructive when giving feedback on writing`},coder:{label:"Code Helper",content:`# Code Helper

You are an expert software engineer. You write clean, well-tested code and explain technical concepts clearly.

## Tone
- Technical but accessible
- Precise with terminology
- Show, don't just tell — include code examples

## Rules
- Always include code examples in fenced code blocks
- Explain trade-offs between different approaches
- Follow best practices for the language being used
- Suggest tests for any code you write
- When debugging, explain your reasoning step by step`},support:{label:"Customer Support",content:`# Customer Support Agent

You are a friendly, empathetic customer support agent. Your goal is to help users solve their problems quickly and leave them feeling good about the experience.

## Tone
- Warm and empathetic
- Solution-oriented
- Never condescending or dismissive

## Rules
- Acknowledge the user's frustration before jumping to solutions
- Ask clarifying questions if the problem isn't clear
- Provide step-by-step instructions when possible
- Offer alternative solutions if the first one doesn't work
- End every interaction by confirming the issue is resolved`},analyst:{label:"Research Analyst",content:`# Research Analyst

You are a meticulous research analyst. You gather evidence, synthesize information, and present balanced, well-sourced analyses.

## Tone
- Objective and evidence-based
- Structured and methodical
- Clear about confidence levels and limitations

## Rules
- Distinguish between facts, estimates, and opinions
- Present multiple perspectives on controversial topics
- Use structured formats: summaries, bullet points, tables
- Cite sources and note when data may be outdated
- Flag assumptions and uncertainties explicitly`}};function Se({filePath:s}){const[c,i]=l.useState(""),[v,r]=l.useState(""),[o,u]=l.useState(!1),[x,d]=l.useState(null),y=ce(a=>a.setMilestone),g=c!==v;l.useEffect(()=>{ee(s).then(a=>{i(a),r(a),d(null)}).catch(a=>{i(""),r(""),d(a instanceof Error?a.message:String(a))})},[s]);const b=async()=>{u(!0);try{await se(s,c),r(c),y("personalityEdited"),N("Personality saved","success")}catch(a){N(`Failed to save personality: ${a instanceof Error?a.message:String(a)}`,"error")}finally{u(!1)}},f=a=>{if(a==="none")return;const n=J[a];n&&i(n.content)},j=()=>{i(v),N("Reverted to last saved version","default")};return e.jsxs(T,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(z,{children:"Personality Editor"}),e.jsx(K,{children:"Define how your agent speaks, thinks, and behaves. Write instructions in plain language — this is your agent's personality."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[g&&e.jsxs(m,{onClick:j,variant:"ghost",size:"sm",title:"Revert to last saved version",children:[e.jsx(te,{className:"mr-2 h-4 w-4"})," Revert"]}),e.jsxs(m,{onClick:b,disabled:o||!g,size:"sm",children:[e.jsx(ae,{className:"mr-2 h-4 w-4"})," ",o?"Saving...":"Save"]})]})]})}),e.jsxs(_,{children:[x&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No existing personality file found — start writing or pick a template below."}),e.jsx("div",{className:"mb-4",children:e.jsxs($,{onValueChange:f,children:[e.jsx(q,{className:"w-64",children:e.jsx(Y,{placeholder:"Start from a template..."})}),e.jsx(B,{children:Object.entries(J).filter(([a])=>a!=="none").map(([a,n])=>e.jsx(H,{value:a,children:n.label},a))})]})}),e.jsxs(pe,{defaultValue:"edit",children:[e.jsxs(ge,{children:[e.jsx(I,{value:"edit",children:"Edit"}),e.jsx(I,{value:"preview",children:"Preview"})]}),e.jsx(G,{value:"edit",children:e.jsx(Z,{value:c,onChange:a=>i(a.target.value),className:"min-h-[400px] font-mono text-sm",placeholder:"# Agent Personality\\n\\nDefine your agent's personality here..."})}),e.jsx(G,{value:"preview",children:e.jsx("div",{className:"min-h-[400px] rounded-md border p-4 prose prose-sm prose-invert max-w-none [&_pre]:overflow-x-auto [&_pre]:rounded-md [&_pre]:bg-black/20 [&_pre]:p-3 [&_code]:rounded [&_code]:bg-black/20 [&_code]:px-1 [&_code]:py-0.5 [&_code]:text-xs [&_h1]:text-lg [&_h2]:text-base [&_h3]:text-sm",children:c?e.jsx(l.Suspense,{fallback:e.jsx("p",{className:"text-muted-foreground",children:"Loading preview..."}),children:e.jsx(Ce,{children:c})}):e.jsx("p",{className:"text-muted-foreground italic",children:"Nothing to preview yet. Write some content or select a template."})})})]}),g&&e.jsx("p",{className:"mt-2 text-xs text-yellow-400",children:"You have unsaved changes"})]})]})}const Q={web_search:"Search the web for information",web_fetch:"Fetch content from web pages",file_read:"Read files on your computer",file_write:"Create or modify files on your computer",code_execute:"Run code snippets",shell_exec:"Run terminal commands on your system",database_query:"Query the local database",api_call:"Make requests to external APIs"},k=[{name:"web_search",allowed:!0,risk:"low"},{name:"web_fetch",allowed:!0,risk:"low"},{name:"file_read",allowed:!0,risk:"medium"},{name:"file_write",allowed:!1,risk:"high"},{name:"code_execute",allowed:!1,risk:"high"},{name:"shell_exec",allowed:!1,risk:"high"},{name:"database_query",allowed:!0,risk:"medium"},{name:"api_call",allowed:!0,risk:"medium"}],ke={low:"success",medium:"warning",high:"destructive"};function Te(s){const c=[],i=s.split(`
`);for(const v of i){const r=v.match(/^-\s+(\w+):\s*(allowed|denied)/i);if(r){const o=r[1],u=r[2].toLowerCase()==="allowed",x=k.find(d=>d.name===o);c.push({name:o,allowed:u,risk:(x==null?void 0:x.risk)??"medium"})}}return c.length>0?c:k}function _e(s){return`# Tool Permissions

${s.map(i=>`- ${i.name}: ${i.allowed?"allowed":"denied"}`).join(`
`)}
`}function Ee({agentId:s,tools:c,onChange:i}){const[v,r]=l.useState(c??k),[o,u]=l.useState(!1),[x,d]=l.useState(!1),[y,g]=l.useState(null),[b,f]=l.useState(!1);l.useEffect(()=>{if(s){const n=`agents/${s}/agent/TOOLS.md`;ee(n).then(w=>{r(Te(w)),f(!1)}).catch(()=>{r(k),f(!0)})}},[s]);const j=(n,w)=>{const t=v.map(p=>p.name===n?{...p,allowed:w}:p);r(t),u(!0),i==null||i(t)},a=async()=>{if(s){d(!0),g(null);try{const n=`agents/${s}/agent/TOOLS.md`;await se(n,_e(v)),u(!1),f(!1),N("Tool permissions saved","success")}catch(n){g(n instanceof Error?n.message:String(n))}finally{d(!1)}}};return e.jsxs(T,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"})," Tool Permissions"]}),e.jsx(K,{children:"Control which tools this agent can use"})]}),e.jsxs("div",{className:"flex gap-2",children:[s&&e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{r(k),u(!0)},title:"Reset to defaults",children:[e.jsx(te,{className:"mr-2 h-4 w-4"})," Reset"]}),s&&o&&e.jsxs(m,{size:"sm",onClick:a,disabled:x,children:[e.jsx(ae,{className:"mr-2 h-4 w-4"})," ",x?"Saving...":"Save"]})]})]})}),e.jsxs(_,{children:[b&&e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"No custom permissions file found — showing defaults. Save to create one."}),y&&e.jsxs("div",{className:"flex items-center gap-2 rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive mb-3",children:[e.jsx(W,{className:"h-4 w-4 shrink-0"}),"Failed to save: ",y]}),e.jsx("div",{className:"space-y-3",children:v.map(n=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-mono text-sm",children:n.name}),e.jsx(U,{variant:ke[n.risk],children:n.risk})]}),Q[n.name]&&e.jsx("span",{className:"text-xs text-muted-foreground",children:Q[n.name]})]}),e.jsx(ne,{checked:n.allowed,onCheckedChange:w=>j(n.name,w)})]},n.name))})]})]})}function Ae({agent:s,onDeleted:c,onUpdated:i}){const[v,r]=l.useState(!1),[o,u]=l.useState(!1),[x,d]=l.useState(!1),[y,g]=l.useState(!1),[b,f]=l.useState(!1),[j,a]=l.useState(s.model??""),[n,w]=l.useState(!1),[t,p]=l.useState(!1),le=async()=>{if(!(!j||j===s.model)){w(!0);try{await A("update_agent",{id:s.id,model:j}),f(!1),i==null||i()}catch(h){N(`Failed to update model: ${h instanceof Error?h.message:String(h)}`,"error")}finally{w(!1)}}},ie=async()=>{p(!0);try{await A("update_agent",{id:s.id,enabled:!s.enabled}),i==null||i()}catch(h){N(`Failed to update agent: ${h instanceof Error?h.message:String(h)}`,"error")}finally{p(!1)}},re=async()=>{g(!0);try{await A("delete_agent",{id:s.id,deleteFiles:!0}),d(!1),c==null||c()}catch(h){N(`Failed to delete agent: ${h instanceof Error?h.message:String(h)}`,"error")}finally{g(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:[e.jsxs(F,{className:"flex flex-row items-center gap-3 space-y-0 pb-2",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(X,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(z,{className:"text-base",children:s.name||s.id}),e.jsxs("button",{type:"button",className:"text-xs text-muted-foreground hover:text-foreground hover:underline transition-colors text-left",onClick:()=>{a(s.model??""),f(!0)},children:[fe(s.model)," ✎"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{variant:s.enabled?"success":"outline",children:s.enabled?"Active":"Disabled"}),e.jsx(ne,{checked:s.enabled,onCheckedChange:ie,disabled:t,"aria-label":s.enabled?"Disable agent":"Enable agent"})]})]}),e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:s.personalityFile?"Custom personality":"Default"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(m,{variant:"ghost",size:"icon",className:"h-8 w-8","aria-label":"Edit personality",title:"Edit personality",onClick:()=>r(!0),children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"icon",className:"h-8 w-8","aria-label":"Tool permissions",title:"Tool permissions",onClick:()=>u(!0),children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive","aria-label":"Delete agent",title:"Delete agent",onClick:()=>d(!0),children:e.jsx(we,{className:"h-4 w-4"})})]})]})})]}),e.jsx(C,{open:v,onOpenChange:r,children:e.jsx(S,{className:"max-w-2xl",children:e.jsx(Se,{filePath:s.personalityFile??`agents/${s.id}/agent/SOUL.md`})})}),e.jsx(C,{open:o,onOpenChange:u,children:e.jsx(S,{className:"max-w-lg",children:e.jsx(Ee,{agentId:s.id})})}),e.jsx(C,{open:b,onOpenChange:f,children:e.jsxs(S,{children:[e.jsxs(D,{children:[e.jsx(O,{children:"Change Model"}),e.jsxs(M,{children:["Select a new model for ",e.jsx("strong",{children:s.name}),"."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{children:"Model"}),e.jsxs($,{value:j,onValueChange:a,children:[e.jsx(q,{children:e.jsx(Y,{placeholder:"Select model..."})}),e.jsx(B,{children:L.map(h=>e.jsx(H,{value:h.value,children:h.label},h.value))})]})]}),e.jsxs(R,{children:[e.jsx(m,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(m,{onClick:le,disabled:n||!j||j===s.model,children:n?"Saving...":"Save"})]})]})}),e.jsx(C,{open:x,onOpenChange:d,children:e.jsxs(S,{children:[e.jsxs(D,{children:[e.jsx(O,{children:"Delete Agent"}),e.jsxs(M,{children:["Are you sure you want to delete ",e.jsx("strong",{children:s.name}),"? This will remove the agent and its files."]})]}),e.jsxs(R,{children:[e.jsx(m,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(m,{variant:"destructive",onClick:re,disabled:y,children:y?"Deleting...":"Delete"})]})]})})]})}function Qe(){be("Agents");const{agents:s,loading:c,reload:i}=xe(),[v,r]=l.useState(!1),[o,u]=l.useState(""),[x,d]=l.useState("llama3.3"),[y,g]=l.useState(""),[b,f]=l.useState(!1),[j,a]=l.useState(null),n=async()=>{if(o.trim()){f(!0),a(null);try{const t=o.trim(),p=t.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||"agent";await A("create_agent",{id:p,name:t,model:x||null,personality:y||null}),await i(),u(""),d("llama3.3"),g(""),a(null),r(!1),N("Agent created","success")}catch(t){a(String(t))}finally{f(!1)}}},w=()=>{u(""),d("llama3.3"),g(""),r(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:["Agents",e.jsx(ye,{text:"Agents are your AI assistants. Each one has its own personality, model, and tool permissions. Create multiple agents for different tasks."})]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your agents"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:i,children:[e.jsx(ue,{className:"mr-2 h-4 w-4"})," Refresh"]}),e.jsxs(m,{size:"sm",onClick:w,children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," New Agent"]})]})]}),c?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(t=>e.jsx(T,{children:e.jsxs(_,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(E,{className:"h-10 w-10 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(E,{className:"h-4 w-24"}),e.jsx(E,{className:"h-3 w-32"})]})]}),e.jsx(E,{className:"h-3 w-full"})]})},t))}):s.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(t=>e.jsx(Ae,{agent:t,onDeleted:i,onUpdated:i},t.id))}):e.jsx(T,{children:e.jsxs(_,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(X,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No agents configured yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 mb-4",children:"Agents are AI assistants you can customize with personalities, tools, and schedules."}),e.jsxs(m,{onClick:w,children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," Create Your First Agent"]})]})}),e.jsx(C,{open:v,onOpenChange:r,children:e.jsxs(S,{children:[e.jsxs(D,{children:[e.jsx(O,{children:"Create New Agent"}),e.jsx(M,{children:"Configure a new agent with personality and model"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{children:"Agent Name"}),e.jsx(he,{value:o,onChange:t=>u(t.target.value.slice(0,50)),placeholder:"e.g., Atlas, Nova, Jarvis...",maxLength:50}),o.trim()?s.some(t=>t.name.toLowerCase()===o.trim().toLowerCase())?e.jsx("p",{className:"text-xs text-destructive",children:"An agent with this name already exists"}):o.length>=45?e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.length,"/50"]}):null:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Give your agent a name to continue"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{children:"Model"}),e.jsxs($,{value:x,onValueChange:d,children:[e.jsx(q,{children:e.jsx(Y,{})}),e.jsx(B,{children:L.map(t=>{const p=je(t.tier);return e.jsx(H,{value:t.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t.label}),t.recommended&&e.jsx("span",{className:"rounded bg-primary/20 px-1.5 py-0.5 text-[10px] font-semibold text-primary",children:"Recommended"}),e.jsx("span",{className:`rounded px-1.5 py-0.5 text-[10px] ${p.bg} ${p.color}`,children:p.label}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:ve(t.costPer1M)})]})},t.value)})})]}),(()=>{const t=L.find(p=>p.value===x);return t?e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.description,t.local&&" No API key required."]}):null})()]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{children:"Personality (SOUL.md)"}),e.jsx(Z,{value:y,onChange:t=>g(t.target.value),placeholder:"Optional: Define personality, tone, and rules...",className:"min-h-[120px] font-mono text-sm"})]})]}),j&&e.jsx("p",{className:"text-sm text-destructive",children:j}),e.jsxs(R,{children:[e.jsx(m,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(m,{onClick:n,disabled:b||!o.trim()||s.some(t=>t.name.toLowerCase()===o.trim().toLowerCase()),title:o.trim()?void 0:"Enter an agent name",children:b?"Creating...":"Create Agent"})]})]})})]})}export{Qe as default};
