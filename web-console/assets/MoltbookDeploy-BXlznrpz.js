import{c as U,i as f,r as t,a3 as x,j as e,C as c,a as d,b as o,d as h,e as m,a0 as p,B as T,am as W,l as u}from"./index-DLzrVyEL.js";import{L as i}from"./label-N6WvVUTh.js";import{T as D}from"./textarea-Cg5T9mcn.js";import{T as $,a as z,b as g,c as j}from"./tabs-DFtfPH-O.js";import{u as V}from"./useConfig-DHY6Oysh.js";import{H as q}from"./HelpTip-Bf0ngYP4.js";import{g as J}from"./models-BN2rvPIS.js";import{u as Q}from"./usePageTitle-BWQ1x_eW.js";import{F as X}from"./file-text-2xaGoTCx.js";import{R as Y}from"./rocket-D-37-1MK.js";import{U as Z}from"./user-Bq0WeS-k.js";import"./index-BmrRr2YK.js";import"./config-DtO68tKR.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=U("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);async function se(a){return f("generate_skill_md",{data:a})}async function ae(a,r){return f("save_skill_md",{agentId:a,content:r})}function je(){var w,S;Q("Deploy");const{config:a}=V(),[r,A]=t.useState(""),[y,M]=t.useState(""),[N,P]=t.useState(""),[v,G]=t.useState("grok-4-1-fast-reasoning"),[b,L]=t.useState("telegram"),[l,B]=t.useState(""),[_,C]=t.useState(!1),[E,F]=t.useState(""),[R,H]=t.useState(0);t.useEffect(()=>{f("read_audit_log",{limit:1e4}).then(s=>H(s.length)).catch(()=>x("Could not load audit log","warning"))},[]);const I=async()=>{try{const s=await se({agentName:r,description:y,capabilities:N.split(`
`).filter(Boolean),model:v,channels:b.split(",").map(O=>O.trim()).filter(Boolean)});B(s),C(!1)}catch(s){x(`Failed to generate profile: ${s instanceof Error?s.message:String(s)}`,"error")}},K=async()=>{if(l)try{const s=r.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-")||"default";await ae(s,l),C(!0),F(`~/.openclaw/agents/${s}/skill.md`)}catch(s){x(`Failed to save profile: ${s instanceof Error?s.message:String(s)}`,"error")}},n=(((w=a==null?void 0:a.agents)==null?void 0:w.list)??[])[0],k=(S=a==null?void 0:a.settings)!=null&&S.channels?Object.entries(a.settings.channels).filter(([,s])=>s==null?void 0:s.enabled).map(([s])=>s):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:["Deploy",e.jsx(q,{text:"Create a public profile for your agent. Generate a skill.md file that describes what your agent can do. When the marketplace goes live, you'll be able to publish it for others to discover."})]}),e.jsx("p",{className:"text-muted-foreground",children:"Create and export your agent's profile"})]}),e.jsxs($,{defaultValue:"generate",children:[e.jsxs(z,{children:[e.jsx(g,{value:"generate",children:"Generate skill.md"}),e.jsx(g,{value:"profile",children:"Agent Profile"}),e.jsx(g,{value:"karma",children:"Karma"})]}),e.jsxs(j,{value:"generate",className:"space-y-4",children:[e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{className:"text-lg",children:"Agent Profile Generator"}),e.jsx(h,{children:"Create a skill.md that describes your agent's capabilities."})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Agent Name"}),e.jsx(p,{value:r,onChange:s=>A(s.target.value),placeholder:"My Agent",maxLength:50})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Model"}),e.jsx(p,{value:v,onChange:s=>G(s.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Description"}),e.jsx(D,{value:y,onChange:s=>M(s.target.value.slice(0,500)),placeholder:"What does your agent do?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Capabilities (one per line)"}),e.jsx(D,{value:N,onChange:s=>P(s.target.value.slice(0,2e3)),placeholder:`Research and analysis
Code review
Writing assistance`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Channels (comma-separated)"}),e.jsx(p,{value:b,onChange:s=>L(s.target.value),placeholder:"telegram, discord"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onClick:I,disabled:!r.trim(),children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," Generate"]}),e.jsxs(T,{variant:"default",disabled:!l,onClick:K,title:l?void 0:"Generate a profile first",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," Save Profile"]})]}),_&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-green-500/30 bg-green-500/5 p-3 text-sm",children:[e.jsx(W,{className:"h-4 w-4 text-green-400"}),e.jsxs("span",{children:["Profile saved to ",e.jsx("code",{className:"font-mono text-xs",children:E})]})]})]})]}),l&&e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(o,{className:"text-lg",children:"Generated skill.md"})}),e.jsx(m,{children:e.jsx("pre",{className:"rounded-lg bg-muted p-4 text-sm font-mono whitespace-pre-wrap",children:l})})]})]}),e.jsx(j,{value:"profile",children:e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{className:"text-lg",children:"Agent Profile"}),e.jsx(h,{children:"Overview of your primary agent"})]}),e.jsx(m,{children:n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("span",{className:"font-semibold",children:n.name})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Model"}),e.jsx(u,{children:J(n.model)})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(u,{variant:n.enabled?"success":"secondary",children:n.enabled?"Active":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Channels"}),e.jsx("div",{className:"flex gap-1",children:k.length>0?k.map(s=>e.jsx(u,{variant:"outline",children:s},s)):e.jsx("span",{className:"text-sm text-muted-foreground italic",children:"None enabled"})})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Personality"}),e.jsx("span",{className:"text-sm",children:n.personality?"Custom SOUL.md":"Default"})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No agents configured yet. Create one in Agents page."})]})})]})}),e.jsx(j,{value:"karma",children:e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{className:"text-lg",children:"Karma Score"}),e.jsx(h,{children:"Activity-based reputation (local proxy)"})]}),e.jsx(m,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(ee,{className:"h-16 w-16 text-yellow-400 mb-4"}),e.jsx("span",{className:"text-5xl font-bold",children:R}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Total actions recorded in audit log"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Derived from local audit log activity."})]})})]})})]})]})}export{je as default};
